package main

import (
	"fmt"
	"net/http"
	"os"
	"path/filepath"
	"strings"
	"text/template"

	"github.com/josephbudd/kickwasm/examples/colors/domain/data/filepaths"
)

/*

	DO NOT EDIT THIS FILE.

	This file is generated by kickasm and regenerated by rekickasm.

*/

const (
	mainTemplate = "main.tmpl"
	headTemplate = "head.tmpl"
)

// serviceEmptyInsidePanelNamePathMap maps each markup panel template name to it's file path.
var serviceEmptyInsidePanelNamePathMap = map[string]map[string][]string{"Service1": map[string][]string{"Service1Level1MarkupPanel": []string{"Service1Button", "Service1Level1ButtonPanel", "ContentButton"}, "Service1Level2MarkupPanel": []string{"Service1Button", "Service1Level1ButtonPanel", "ColorsButton", "Service1Level2ButtonPanel", "ContentButton"}, "Service1Level3MarkupPanel": []string{"Service1Button", "Service1Level1ButtonPanel", "ColorsButton", "Service1Level2ButtonPanel", "ColorsButton", "Service1Level3ButtonPanel", "ContentButton"}, "Service1Level4MarkupPanel": []string{"Service1Button", "Service1Level1ButtonPanel", "ColorsButton", "Service1Level2ButtonPanel", "ColorsButton", "Service1Level3ButtonPanel", "ColorsButton", "Service1Level4ButtonPanel", "ContentButton"}, "Service1Level5MarkupPanel": []string{"Service1Button", "Service1Level1ButtonPanel", "ColorsButton", "Service1Level2ButtonPanel", "ColorsButton", "Service1Level3ButtonPanel", "ColorsButton", "Service1Level4ButtonPanel", "ColorsButton", "Service1Level5ButtonPanel", "ContentButton"}}, "Service2": map[string][]string{"Service2Level4MarkupPanel": []string{"Service2Button", "Service2Level1ButtonPanel", "ColorsButton", "Service2Level2ButtonPanel", "ColorsButton", "Service2Level3ButtonPanel", "ColorsButton", "Service2Level4ButtonPanel", "ContentButton"}, "Service2Level5MarkupPanel": []string{"Service2Button", "Service2Level1ButtonPanel", "ColorsButton", "Service2Level2ButtonPanel", "ColorsButton", "Service2Level3ButtonPanel", "ColorsButton", "Service2Level4ButtonPanel", "ColorsButton", "Service2Level5ButtonPanel", "ContentButton"}, "Service2Level1MarkupPanel": []string{"Service2Button", "Service2Level1ButtonPanel", "ContentButton"}, "Service2Level2MarkupPanel": []string{"Service2Button", "Service2Level1ButtonPanel", "ColorsButton", "Service2Level2ButtonPanel", "ContentButton"}, "Service2Level3MarkupPanel": []string{"Service2Button", "Service2Level1ButtonPanel", "ColorsButton", "Service2Level2ButtonPanel", "ColorsButton", "Service2Level3ButtonPanel", "ContentButton"}}, "Service3": map[string][]string{"Service3Level5MarkupPanel": []string{"Service3Button", "Service3Level1ButtonPanel", "ColorsButton", "Service3Level2ButtonPanel", "ColorsButton", "Service3Level3ButtonPanel", "ColorsButton", "Service3Level4ButtonPanel", "ColorsButton", "Service3Level5ButtonPanel", "ContentButton"}, "Service3Level1MarkupPanel": []string{"Service3Button", "Service3Level1ButtonPanel", "ContentButton"}, "Service3Level2MarkupPanel": []string{"Service3Button", "Service3Level1ButtonPanel", "ColorsButton", "Service3Level2ButtonPanel", "ContentButton"}, "Service3Level3MarkupPanel": []string{"Service3Button", "Service3Level1ButtonPanel", "ColorsButton", "Service3Level2ButtonPanel", "ColorsButton", "Service3Level3ButtonPanel", "ContentButton"}, "Service3Level4MarkupPanel": []string{"Service3Button", "Service3Level1ButtonPanel", "ColorsButton", "Service3Level2ButtonPanel", "ColorsButton", "Service3Level3ButtonPanel", "ColorsButton", "Service3Level4ButtonPanel", "ContentButton"}}, "Service4": map[string][]string{"Service4Level1MarkupPanel": []string{"Service4Button", "Service4Level1ButtonPanel", "ContentButton"}, "Service4Level2MarkupPanel": []string{"Service4Button", "Service4Level1ButtonPanel", "ColorsButton", "Service4Level2ButtonPanel", "ContentButton"}, "Service4Level3MarkupPanel": []string{"Service4Button", "Service4Level1ButtonPanel", "ColorsButton", "Service4Level2ButtonPanel", "ColorsButton", "Service4Level3ButtonPanel", "ContentButton"}, "Service4Level4MarkupPanel": []string{"Service4Button", "Service4Level1ButtonPanel", "ColorsButton", "Service4Level2ButtonPanel", "ColorsButton", "Service4Level3ButtonPanel", "ColorsButton", "Service4Level4ButtonPanel", "ContentButton"}, "Service4Level5MarkupPanel": []string{"Service4Button", "Service4Level1ButtonPanel", "ColorsButton", "Service4Level2ButtonPanel", "ColorsButton", "Service4Level3ButtonPanel", "ColorsButton", "Service4Level4ButtonPanel", "ColorsButton", "Service4Level5ButtonPanel", "ContentButton"}}, "Service5": map[string][]string{"Service5Level4MarkupPanel": []string{"Service5Button", "Service5Level1ButtonPanel", "ColorsButton", "Service5Level2ButtonPanel", "ColorsButton", "Service5Level3ButtonPanel", "ColorsButton", "Service5Level4ButtonPanel", "ContentButton"}, "Service5Level5MarkupPanel": []string{"Service5Button", "Service5Level1ButtonPanel", "ColorsButton", "Service5Level2ButtonPanel", "ColorsButton", "Service5Level3ButtonPanel", "ColorsButton", "Service5Level4ButtonPanel", "ColorsButton", "Service5Level5ButtonPanel", "ContentButton"}, "Service5Level1MarkupPanel": []string{"Service5Button", "Service5Level1ButtonPanel", "ContentButton"}, "Service5Level2MarkupPanel": []string{"Service5Button", "Service5Level1ButtonPanel", "ColorsButton", "Service5Level2ButtonPanel", "ContentButton"}, "Service5Level3MarkupPanel": []string{"Service5Button", "Service5Level1ButtonPanel", "ColorsButton", "Service5Level2ButtonPanel", "ColorsButton", "Service5Level3ButtonPanel", "ContentButton"}}}

// serveMainHTML only serves up main.tmpl with all of the templates for your markup panels.
func serveMainHTML(w http.ResponseWriter) {
	templateFolderPath := filepaths.GetTemplatePath()
	t := template.New(mainTemplate)
	t, err := t.ParseFiles(filepath.Join(templateFolderPath, mainTemplate))
	if err != nil {
		http.Error(w, err.Error(), 300)
		return
	}
	for _, namePathMap := range serviceEmptyInsidePanelNamePathMap {
		for name, folders := range namePathMap {
			folderPath := strings.Join(folders, string(os.PathSeparator))
			tpath := filepath.Join(templateFolderPath, folderPath, name+".tmpl")
			t, err = t.ParseFiles(tpath)
			if err != nil {
				http.Error(w, err.Error(), 300)
				return
			}
		}
	}
	// the head template which contains
	//  * any css imports
	//  * any javascript imports
	// needed for this applicaion
	tpath := filepath.Join(templateFolderPath, headTemplate)
	// it's ok if the template is not there
	// but if it's there use it.
	if _, err := os.Stat(tpath); os.IsNotExist(err) {
		// the template file does not exist so inform the developer.
		temp := fmt.Sprintf("%[1]s%[1]s define %[3]q %[2]s%[2]s<!-- You do not have a %[3]s file to import your css files. Feel free to add one in the render/template folder. -->%[1]s%[1]s end %[2]s%[2]s", "{", "}", headTemplate)
		t, err = t.Parse(temp)
		if err != nil {
			http.Error(w, err.Error(), 300)
			return
		}
	} else {
		// the file exists so parse it
		t, err = t.ParseFiles(tpath)
		if err != nil {
			http.Error(w, err.Error(), 300)
			return
		}
	}
	// do the template
	if err := t.ExecuteTemplate(w, mainTemplate, nil); err != nil {
		http.Error(w, err.Error(), 300)
	}
}

