// +build js, wasm

package viewtools

import (
	"syscall/js"

	"github.com/josephbudd/kickwasm/examples/colors/rendererprocess/framework/callback"
)

/*

WARNING:

DO NOT EDIT THIS FILE.

*/

// Visibility class names.
const (
	spawnIDReplacePattern  = "{{.SpawnID}}"
	TabClassName           = "tab"
	SelectedTabClassName   = "selected-tab"
	UnSelectedTabClassName = "unselected-tab"
	TabPanelClassName      = "panel-bound-to-tab"

	TabBarClassName      = "tab-bar"
	UnderTabBarClassName = "under-tab-bar"

	PanelClassName                   = "panel"
	PanelWithHeadingClassName        = "panel-with-heading"
	PanelWithTabBarClassName         = "panel-with-tab-bar"
	PanelHeadingClassName            = "heading-of-panel"
	PanelHeadingLevelPrefixClassName = "heading-of-panel-level-"
	TabPanelGroupClassName           = "inner-panel"
	UserContentClassName             = "user-content"
	ResizeMeWidthClassName           = "resize-me-width"

	SliderClassName                  = "slider"
	SliderPanelClassName             = "slider-panel"
	SliderPanelInnerClassName        = "slider-panel-pad"
	SliderPanelInnerSiblingClassName = "slider-panel-inner-sibling"
	SliderButtonPadClassName         = "slider-button-pad"

	SeenClassName       = "seen"
	UnSeenClassName     = "unseen"
	ToBeSeenClassName   = "tobe-seen"
	ToBeUnSeenClassName = "tobe-unseen"

	CookieCrumbClassName            = "cookie-crumb"
	CookieCrumbLevelPrefixClassName = "cookie-crumb-level-"

	VScrollClassName  = "vscroll"
	HVScrollClassName = "hvscroll"

	MasterID           = "mainMasterView"
	HomeID             = "mainMasterView-home"
	HomePadID          = "mainMasterView-home-pad"
	SliderID           = "mainMasterView-home-slider"
	SliderBackID       = "mainMasterView-home-slider-back"
	SliderCollectionID = "mainMasterView-home-slider-collection"

	BackIDAttribute         = "backid"
	BackColorLevelAttribute = "backColorLevel"
)

var (
	document  js.Value
	global    js.Value
	alert     js.Value
	undefined js.Value
	null      js.Value

	body                               js.Value
	tabsMasterview                     js.Value
	tabsMasterviewHome                 js.Value
	tabsMasterviewHomeButtonPad        js.Value
	tabsMasterviewHomeSlider           js.Value
	tabsMasterviewHomeSliderBack       js.Value
	tabsMasterviewHomeSliderCollection js.Value

	// modal
	modalMasterView        js.Value
	modalMasterViewCenter  js.Value
	modalMasterViewH1      js.Value
	modalMasterViewMessage js.Value
	modalMasterViewClose   js.Value
	modalQueue = make([]*modalViewData, 5, 5)
	modalQueueLastIndex    = -1
	beingModal             bool
	modalCallBack          func()
	// black
	blackMasterView js.Value
	// groups
	buttonPanelsMap = make(map[string][]js.Value, 100)
	// slider
	here =  js.Undefined()
	backStack []js.Value
	// tabber
	tabberLastPanelID     string
	tabberTabBarLastPanel map[string]string
	// button locking
	buttonsLocked             bool
	buttonsLockedMessageTitle string
	buttonsLockedMessageText  string

	// spawns

	spawnID               uint64
	SpawnIDReplacePattern string

	// user content

	panelNameHVScroll = map[string]bool{"Action1Level1ButtonPanel":false, "Action1Level1MarkupPanel":true, "Action1Level2ButtonPanel":false, "Action1Level2MarkupPanel":false, "Action1Level3ButtonPanel":false, "Action1Level3MarkupPanel":false, "Action1Level4ButtonPanel":false, "Action1Level4MarkupPanel":false, "Action1Level5ButtonPanel":false, "Action1Level5MarkupPanel":false, "Action2Level1ButtonPanel":false, "Action2Level1MarkupPanel":true, "Action2Level2ButtonPanel":false, "Action2Level2MarkupPanel":false, "Action2Level3ButtonPanel":false, "Action2Level3MarkupPanel":false, "Action2Level4ButtonPanel":false, "Action2Level4MarkupPanel":false, "Action2Level5ButtonPanel":false, "Action2Level5MarkupPanel":false, "Action3Level1ButtonPanel":false, "Action3Level1MarkupPanel":true, "Action3Level2ButtonPanel":false, "Action3Level2MarkupPanel":false, "Action3Level3ButtonPanel":false, "Action3Level3MarkupPanel":false, "Action3Level4ButtonPanel":false, "Action3Level4MarkupPanel":false, "Action3Level5ButtonPanel":false, "Action3Level5MarkupPanel":false, "Action4Level1ButtonPanel":false, "Action4Level1MarkupPanel":true, "Action4Level2ButtonPanel":false, "Action4Level2MarkupPanel":false, "Action4Level3ButtonPanel":false, "Action4Level3MarkupPanel":false, "Action4Level4ButtonPanel":false, "Action4Level4MarkupPanel":false, "Action4Level5ButtonPanel":false, "Action4Level5MarkupPanel":false, "Action5Level1ButtonPanel":false, "Action5Level1MarkupPanel":true, "Action5Level2ButtonPanel":false, "Action5Level2MarkupPanel":false, "Action5Level3ButtonPanel":false, "Action5Level3MarkupPanel":false, "Action5Level4ButtonPanel":false, "Action5Level4MarkupPanel":false, "Action5Level5ButtonPanel":false, "Action5Level5MarkupPanel":false}

	// markup panels

	countMarkupPanels = 25
	countSpawnedMarkupPanels int
	countWidgetsWaiting      int

	// spawned widgets

	spawnedWidgets = make(map[uint64]spawnedWidgetInfo, 100)

	// printing

	extraHeight   float64
	documentTitle string
	printTitle    string
)

func getElementByID(document js.Value, id string) (e js.Value) {
	e = document.Call("getElementById", id)
	return
}

func init() {
	global = js.Global()
	document = global.Get("document")
	alert = global.Get("alert")
	undefined = js.Undefined()
	null = js.Null()

	documentTitle = document.Get("title").String()
	printTitle = documentTitle

	SpawnIDReplacePattern = spawnIDReplacePattern
	bodies := document.Call("getElementsByTagName", "BODY")
	body = bodies.Index(0)
	tabsMasterview = getElementByID(document, MasterID)
	tabsMasterviewHome = getElementByID(document, HomeID)
	tabsMasterviewHomeButtonPad = getElementByID(document, HomePadID)
	tabsMasterviewHomeSlider = getElementByID(document, SliderID)
	tabsMasterviewHomeSliderBack = getElementByID(document, SliderBackID)
	tabsMasterviewHomeSliderCollection = getElementByID(document, SliderCollectionID)
	// modal
	modalMasterView = getElementByID(document, "modalInformationMasterView")
	modalMasterViewCenter = getElementByID(document, "modalInformationMasterView-center")
	modalMasterViewH1 = getElementByID(document, "modalInformationMasterView-h1")
	modalMasterViewMessage = getElementByID(document, "modalInformationMasterView-message")
	modalMasterViewClose = getElementByID(document, "modalInformationMasterView-close")
	modalQueue = make([]*modalViewData, 5, 5)
	modalQueueLastIndex = -1
	callback.AddEventHandler(handleModalMasterViewClose, modalMasterViewClose, "click", false, 0)
	// black
	blackMasterView = getElementByID(document, "blackMasterView")
	// Setup printing markup panels.
	callback.AddEventHandler(beforePrint, global, "beforeprint", false, 0)
	callback.AddEventHandler(afterPrint, global, "afterprint", false, 0)

	initializeGroups()
	initializeSlider()
	initializeResize()
	initializeTabBar()
}
